<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>GD Ultimate Edition</title>
    <style>
        /* РєР°СЂРѕС‡Рµ С‚СѓС‚ РїРµСЂРµРјРµРЅРЅС‹Рµ С†РІРµС‚РѕРІ С‚РёРїР° С‡С‚РѕР±С‹ РєСЂР°СЃРёРІРѕ Р±С‹Р»Рѕ */
        :root {
            --u-cyan: #00ffcc;
            --u-purple: #4a195c;
            --bg-body: #02050a;
            --bg-card: #0b1120;
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            --accent-green: #22c55e;
            --accent-blue: #3b82f6;
            --border-color: #1e293b;
            --u-yellow: #ffff00;
            --u-red: #ff1100;
        }

        body {
            margin: 0;
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: 'Segoe UI', Tahoma, sans-serif;
            overflow-x: hidden;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            touch-action: manipulation;
            line-height: 1.5;
        }

        /* С„РёРєСЃ РЅР°Р¶Р°С‚РёР№ ios Рё ipad os */
        button,
        a,
        .swatch {
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .navbar {
            background: rgba(2, 5, 10, 0.95);
            border-bottom: 1px solid var(--border-color);
            padding: 20px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 900;
            color: white;
            letter-spacing: 1px;
        }

        .logo span {
            color: var(--u-cyan);
        }

        .btn-main {
            background: linear-gradient(45deg, var(--u-cyan), #00ccff);
            color: black;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 800;
            font-size: 16px;
            display: inline-block;
            box-shadow: 0 0 15px rgba(0, 255, 204, 0.2);
            transition: 0.3s;
            border: none;
            cursor: pointer;
            text-transform: uppercase;
            position: relative;
            z-index: 10;
        }

        .btn-main:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 25px var(--u-cyan);
        }

        .btn-main:active {
            transform: scale(0.95);
        }

        .hero {
            padding: 180px 0 120px;
            background: radial-gradient(circle at top center, #1a2035 0%, var(--bg-body) 70%);
            display: flex;
            align-items: center;
        }

        .hero-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .hero h1 {
            font-size: 48px;
            line-height: 1.1;
            margin-bottom: 20px;
        }

        .hero p {
            color: var(--text-muted);
            font-size: 18px;
            margin-bottom: 30px;
            max-width: 450px;
        }

        .hero img {
            width: 100%;
            max-width: 550px;
            height: auto;
            filter: drop-shadow(0 0 20px rgba(0, 255, 204, 0.5));
        }

        @media (max-width: 768px) {
            .hero {
                padding: 120px 0 60px;
            }

            .hero-grid {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 40px;
            }

            .hero p {
                margin: 0 auto 30px auto;
            }

            .hero h1 {
                font-size: 36px;
            }

            .hero img {
                max-width: 80%;
                margin: 0 auto;
            }

            .comparison-card {
                overflow-x: auto;
            }

            .comp-table th,
            .comp-table td {
                padding: 15px;
                font-size: 14px;
            }

            #cube {
                left: 10% !important;
            }

            #hud-score {
                right: 20px;
                font-size: 36px;
                top: 20px;
            }
        }

        .section-title {
            text-align: center;
            font-size: 36px;
            font-weight: 800;
            margin-bottom: 60px;
            color: white;
        }

        .comparison-section {
            padding: 80px 0;
            background: var(--bg-body);
        }

        .comparison-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 10px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .comp-table {
            width: 100%;
            border-collapse: collapse;
        }

        .comp-table th,
        .comp-table td {
            padding: 25px 30px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .comp-table tr:last-child td {
            border-bottom: none;
        }

        .comp-table th {
            font-size: 18px;
            font-weight: 700;
            color: white;
        }

        .th-highlight {
            color: var(--accent-blue) !important;
            font-size: 20px;
        }

        .comp-table td {
            font-size: 16px;
            color: var(--text-muted);
        }

        .td-success {
            color: var(--accent-green) !important;
            font-weight: 600;
        }

        /* РР“Р РћР’Р«Р• РЎРўРР›Р */
        #game-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #222;
            z-index: 1000;
            display: none;
            touch-action: none;
            outline: none;
        }

        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1020;
            pointer-events: auto;
        }

        .hidden {
            display: none !important;
        }

        #world-layer {
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #1a0b2e, #4a195c);
            position: relative;
            overflow: hidden;
        }

        #bg-grid {
            position: absolute;
            width: 200%;
            height: 100%;
            background-image: linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        #floor {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 80px;
            background: #111;
            border-top: 4px solid var(--u-cyan);
            z-index: 1010;
        }

        #cube {
            /* РЅСѓ СЌС‚Рѕ СЃР°Рј РєСѓР±РёРє РєР°СЂРѕС‡Рµ */
            width: 50px;
            height: 50px;
            position: absolute;
            bottom: 80px;
            left: 15%;
            z-index: 1015;
            background-color: var(--u-yellow);
            border: 3px solid #000;
            box-sizing: border-box;
            will-change: bottom;
            transition: box-shadow 0.2s;
            /* РџР»Р°РІРЅРѕРµ РІРєР»СЋС‡РµРЅРёРµ СЃРІРµС‡РµРЅРёСЏ */
            image-rendering: pixelated;
            /* С‡С‚РѕР±С‹ РїРёРєСЃРµР»Рё Р±С‹Р»Рё С‡РµС‚РєРёРµ */
        }

        /* РЎС‚РёР»Рё РґР»СЏ С‡Р°СЃС‚РёС† (СЃР»РµРґ) С‚РёРїРѕ РєСЂР°СЃРёРІРѕ */
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.5);
            z-index: 1014;
            /* Р§СѓС‚СЊ РЅРёР¶Рµ РєСѓР±Р° */
            pointer-events: none;
        }

        .obstacle {
            position: absolute;
            z-index: 1005;
            will-change: left;
        }

        .spike {
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-bottom: 50px solid var(--u-red);
            bottom: 80px;
        }

        .portal {
            width: 50px;
            height: 120px;
            border: 4px solid #d0f;
            bottom: 80px;
            border-radius: 12px;
            background: rgba(200, 0, 255, 0.2);
            box-shadow: 0 0 20px #d0f;
        }

        .block {
            width: 50px;
            height: 50px;
            background: #444;
            border: 3px solid #fff;
            box-sizing: border-box;
        }

        .block-bonus {
            width: 150px;
            background: #554400;
            border: 4px solid #ffcc00;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: #ffcc00;
        }

        .block-bonus::after {
            content: "+2 PTS";
            font-size: 14px;
        }

        #hud-score {
            position: absolute;
            top: 30px;
            right: 50px;
            font-size: 48px;
            font-weight: 900;
            z-index: 1025;
            color: white;
            text-shadow: 2px 2px 4px black;
        }

        .swatch {
            width: 40px;
            height: 40px;
            border: 2px solid #fff;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .swatch.locked {
            cursor: not-allowed;
            opacity: 0.3;
            background: #333 !important;
        }

        footer {
            padding: 40px;
            text-align: center;
            border-top: 1px solid var(--border-color);
            color: var(--text-muted);
            background: var(--bg-body);
        }

        /* в”Ђв”Ђ THEMES в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #world-layer.theme-space {
            background: linear-gradient(to bottom, #000010, #000830) !important;
        }

        #world-layer.theme-lava {
            background: linear-gradient(to bottom, #1a0000, #3d0800) !important;
        }

        #world-layer.theme-glitch {
            background: linear-gradient(to bottom, #000, #001a00) !important;
        }

        .theme-space #floor {
            background: #0a0010;
            border-top-color: #aaf !important;
        }

        .theme-lava #floor {
            background: #1a0500;
            border-top-color: #f40 !important;
        }

        .theme-glitch #floor {
            background: #000800;
            border-top-color: #0f0 !important;
        }

        #stars {
            position: absolute;
            inset: 0;
            pointer-events: none;
            display: none;
        }

        #lava-glow {
            position: absolute;
            bottom: 80px;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to top, rgba(255, 50, 0, .35), transparent);
            pointer-events: none;
            display: none;
            animation: lavaPulse 2s ease-in-out infinite;
        }

        @keyframes lavaPulse {

            0%,
            100% {
                opacity: .6
            }

            50% {
                opacity: 1
            }
        }

        #glitch-lines {
            position: absolute;
            inset: 0;
            pointer-events: none;
            display: none;
            background: repeating-linear-gradient(to bottom, transparent 0, transparent 3px, rgba(0, 255, 0, .04) 3px, rgba(0, 255, 0, .04) 4px);
            animation: glitchShift .15s steps(1) infinite;
        }

        @keyframes glitchShift {
            0% {
                transform: translateX(0)
            }

            50% {
                transform: translateX(2px)
            }

            100% {
                transform: translateX(-1px)
            }
        }

        /* в”Ђв”Ђ GAME OBJECTS в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        .coin {
            position: absolute;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, #ffe95a, #e6a700);
            border: 3px solid #fff6;
            z-index: 1008;
            box-shadow: 0 0 8px #ffe00088;
            animation: coinSpin 1.2s linear infinite;
        }

        @keyframes coinSpin {
            to {
                transform: rotateY(360deg);
            }
        }

        .speed-arrow {
            position: absolute;
            z-index: 1008;
            width: 0;
            height: 0;
            border-top: 18px solid transparent;
            border-bottom: 18px solid transparent;
            border-left: 36px solid #ff4400;
            filter: drop-shadow(0 0 8px #f40);
        }

        .meteor {
            position: absolute;
            z-index: 1008;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: radial-gradient(circle at 70% 30%, #555, #111);
            box-shadow: inset 0 0 10px #000, 0 0 5px #ff5500;
            border: 2px solid #331100;
            animation: meteorSpin 2s linear infinite;
        }

        @keyframes meteorSpin {
            to {
                transform: rotate(360deg);
            }
        }

        /* в”Ђв”Ђ GHOST в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #ghost-cube {
            position: absolute;
            bottom: 80px;
            left: 15%;
            width: 50px;
            height: 50px;
            border: 2px dashed rgba(0, 200, 255, .5);
            pointer-events: none;
            z-index: 1014;
            display: none;
        }

        /* в”Ђв”Ђ MODE SHAPES в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #cube.mode-ufo {
            margin-bottom: 10px;
            border-radius: 40% 40% 10% 10%;
            box-shadow: 0 0 10px inset rgba(255, 255, 255, 0.5);
        }

        #cube.mode-ufo::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: -18px;
            width: calc(100% + 36px);
            height: 22px;
            border-radius: 50%;
            background: linear-gradient(to bottom, #777, #333);
            border: 2px solid var(--u-cyan);
            box-shadow: 0 0 15px var(--u-cyan);
            z-index: -1;
        }

        #cube.mode-ufo::before {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 20%;
            width: 60%;
            height: 10px;
            border-radius: 50%;
            background: var(--u-cyan);
            filter: blur(4px);
            animation: saucerEngine 0.2s infinite alternate;
            z-index: -2;
        }

        @keyframes saucerEngine {
            from {
                opacity: 0.6
            }

            to {
                opacity: 1
            }
        }


        /* в”Ђв”Ђ HUD EXTRAS в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #hud-coins {
            position: absolute;
            top: 30px;
            left: 20px;
            font-size: 22px;
            font-weight: 900;
            z-index: 1025;
            color: #ffe000;
            text-shadow: 0 0 8px #ffe000;
        }

        #hud-mode {
            position: absolute;
            top: 85px;
            right: 50px;
            font-size: 14px;
            font-weight: 700;
            z-index: 1025;
            color: #aaa;
            letter-spacing: .08em;
            text-align: right;
        }

        #hud-theme {
            position: absolute;
            bottom: 15px;
            right: 20px;
            font-size: 11px;
            z-index: 1025;
            color: #555;
        }

        #shield-flash {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 1030;
            border: 4px solid #0f0;
            opacity: 0;
            transition: opacity .2s;
        }

        #shield-flash.on {
            opacity: .7;
            animation: shieldFlash .2s linear infinite;
        }

        @keyframes shieldFlash {
            0% {
                opacity: .4
            }

            50% {
                opacity: .9
            }

            100% {
                opacity: .4
            }
        }

        /* в”Ђв”Ђ ACHIEVEMENT POPUP в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #ach-popup {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-120px);
            background: rgba(0, 0, 0, .88);
            border: 1px solid #ffe000;
            box-shadow: 0 0 20px rgba(255, 224, 0, .4);
            padding: 12px 22px;
            z-index: 1040;
            display: flex;
            gap: 12px;
            align-items: center;
            transition: transform .4s cubic-bezier(.34, 1.56, .64, 1);
            min-width: 230px;
            pointer-events: none;
        }

        #ach-popup.show {
            transform: translateX(-50%) translateY(0);
        }

        #ach-icon {
            font-size: 26px;
        }

        #ach-title {
            font-size: 13px;
            font-weight: 900;
            color: #ffe000;
            letter-spacing: .08em;
        }

        #ach-desc {
            font-size: 11px;
            color: #aaa;
            margin-top: 2px;
        }

        /* в”Ђв”Ђ THEME BUTTONS IN MENU в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        .theme-btn {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            border: 2px solid #555;
            cursor: pointer;
            transition: border-color .2s, box-shadow .2s;
        }

        .theme-btn.active {
            border-color: #ffe000;
            box-shadow: 0 0 10px #ffe000;
        }
        /* в”Ђв”Ђв”Ђ TOKENS в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        :root {
            --neon: #ffe000;
            --neon2: #ff6b00;
            --cyan: #00ffcc;
            --purple: #b44fff;
            --bg: #010308;
            --bg2: #080c18;
            --card: #0b1020;
            --border: rgba(255, 224, 0, 0.18);
            --text: #e8eaf6;
            --muted: #7b8ab8;
            --font: 'Orbitron', sans-serif;
            --mono: 'Share Tech Mono', monospace;
        }

        /* в”Ђв”Ђв”Ђ RESET в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font);
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* в”Ђв”Ђв”Ђ SCANLINES в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        .scanlines {
            pointer-events: none;
            position: fixed;
            inset: 0;
            z-index: 2000;
            background: repeating-linear-gradient(to bottom,
                    transparent 0px,
                    transparent 3px,
                    rgba(0, 0, 0, 0.08) 3px,
                    rgba(0, 0, 0, 0.08) 4px);
        }

        /* в”Ђв”Ђв”Ђ NAVBAR в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #navbar {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 500;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(1, 3, 8, 0.85);
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(14px);
        }

        #nav-logo {
            display: flex;
            align-items: center;
            gap: .75rem;
            font-size: 1.1rem;
            font-weight: 900;
            letter-spacing: .12em;
            color: var(--neon);
            text-shadow: 0 0 14px var(--neon);
        }

        #nav-logo svg {
            flex-shrink: 0;
        }

        /* в”Ђв”Ђв”Ђ BUTTONS в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        .btn-neon {
            font-family: var(--font);
            font-size: .75rem;
            font-weight: 700;
            letter-spacing: .12em;
            padding: .65rem 1.5rem;
            background: transparent;
            color: var(--neon);
            border: 1px solid var(--neon);
            box-shadow: 0 0 10px rgba(255, 224, 0, .25);
            cursor: pointer;
            text-transform: uppercase;
            transition: background .2s, box-shadow .2s, transform .1s;
        }

        .btn-neon:hover {
            background: rgba(255, 224, 0, .12);
            box-shadow: 0 0 22px rgba(255, 224, 0, .55);
        }

        .btn-neon:active {
            transform: scale(.96);
        }

        .btn-lg {
            font-size: .9rem;
            padding: .85rem 2.4rem;
        }

        .btn-cyan {
            color: var(--cyan);
            border-color: var(--cyan);
            box-shadow: 0 0 10px rgba(0, 255, 204, .25);
        }

        .btn-cyan:hover {
            background: rgba(0, 255, 204, .12);
            box-shadow: 0 0 22px rgba(0, 255, 204, .5);
        }

        /* в”Ђв”Ђв”Ђ HERO в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 7rem 1.5rem 4rem;
            position: relative;
            overflow: hidden;
        }

        #hero-canvas {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            opacity: .45;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 780px;
        }

        #hero-badge {
            display: inline-block;
            font-family: var(--mono);
            font-size: .7rem;
            letter-spacing: .18em;
            color: var(--neon);
            border: 1px solid var(--border);
            padding: .3rem .9rem;
            margin-bottom: 1.8rem;
        }

        #hero-title {
            font-size: clamp(2.8rem, 8vw, 5.5rem);
            font-weight: 900;
            line-height: 1;
            letter-spacing: .04em;
            text-transform: uppercase;
            color: var(--neon);
            text-shadow: 0 0 30px rgba(255, 224, 0, .6), 0 0 60px rgba(255, 224, 0, .3);
            margin-bottom: 1.5rem;
        }

        #hero-title span {
            color: #fff;
        }

        #hero-sub {
            font-size: 1rem;
            color: var(--muted);
            margin-bottom: 2.5rem;
            font-family: var(--mono);
            letter-spacing: .06em;
            max-width: 560px;
            margin-inline: auto;
        }

        .hero-btns {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* в”Ђв”Ђв”Ђ LIVE PREVIEW BOX в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #preview-box {
            margin: 4rem auto 0;
            width: min(90%, 580px);
            aspect-ratio: 2/1;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border);
            background: linear-gradient(to bottom, #08041a, #150b35);
            box-shadow: 0 0 40px rgba(255, 224, 0, .12);
        }

        #preview-grid {
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(255, 255, 255, .03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, .03) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: gridScroll 2s linear infinite;
        }

        @keyframes gridScroll {
            to {
                background-position: -40px 0;
            }
        }

        #preview-floor {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 28%;
            background: #0c0820;
            border-top: 3px solid var(--neon);
        }

        #preview-cube {
            position: absolute;
            bottom: 28%;
            left: 14%;
            width: 48px;
            height: 48px;
            background: var(--neon);
            border: 3px solid #000;
            animation: cubeJump 1.4s ease-in-out infinite;
        }

        @keyframes cubeJump {

            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }

            30% {
                transform: translateY(-70px) rotate(90deg);
            }

            55% {
                transform: translateY(-70px) rotate(180deg);
            }

            80% {
                transform: translateY(0) rotate(270deg);
            }
        }

        .preview-spike {
            position: absolute;
            bottom: 28%;
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-bottom: 38px solid #ff2200;
            animation: spikeMove 2s linear infinite;
        }

        .preview-spike:nth-child(1) {
            animation-delay: 0s;
            left: 60%;
        }

        .preview-spike:nth-child(2) {
            animation-delay: 0.9s;
            left: 80%;
        }

        @keyframes spikeMove {
            from {
                left: 110%;
            }

            to {
                left: -10%;
            }
        }

        .preview-portal {
            position: absolute;
            bottom: 28%;
            width: 36px;
            height: 80px;
            border: 3px solid #cc00ff;
            border-radius: 8px;
            background: rgba(200, 0, 255, .18);
            box-shadow: 0 0 14px #cc00ff;
            animation: portalMove 3.5s linear infinite;
            left: 130%;
        }

        @keyframes portalMove {
            from {
                left: 130%;
            }

            to {
                left: -10%;
            }
        }

        /* в”Ђв”Ђв”Ђ SECTION COMMON в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        section {
            padding: 6rem 1.5rem;
        }

        .section-inner {
            max-width: 1100px;
            margin: 0 auto;
        }

        .section-title {
            font-size: clamp(1.4rem, 4vw, 2.1rem);
            font-weight: 900;
            letter-spacing: .18em;
            text-transform: uppercase;
            color: var(--neon);
            text-shadow: 0 0 20px rgba(255, 224, 0, .4);
            margin-bottom: 3.5rem;
            text-align: center;
        }

        .section-title::before {
            content: '// ';
            color: var(--muted);
        }

        /* в”Ђв”Ђв”Ђ FEATURES в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #features {
            background: var(--bg2);
        }

        #features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
        }

        .feature-card {
            background: var(--card);
            border: 1px solid var(--border);
            padding: 1.8rem 1.5rem;
            transition: border-color .25s, box-shadow .25s, transform .2s;
        }

        .feature-card:hover {
            border-color: var(--neon);
            box-shadow: 0 0 24px rgba(255, 224, 0, .2);
            transform: translateY(-4px);
        }

        .feat-icon {
            font-size: 2rem;
            margin-bottom: .9rem;
        }

        .feature-card h3 {
            font-size: .85rem;
            letter-spacing: .12em;
            text-transform: uppercase;
            color: var(--neon);
            margin-bottom: .5rem;
        }

        .feature-card p {
            font-family: var(--mono);
            font-size: .8rem;
            color: var(--muted);
        }

        /* в”Ђв”Ђв”Ђ COMPARISON в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #comparison {
            background: var(--bg);
        }

        .comp-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card);
            border: 1px solid var(--border);
        }

        .comp-table th,
        .comp-table td {
            padding: 1.2rem 1.5rem;
            border-bottom: 1px solid var(--border);
            font-size: .85rem;
            text-align: left;
        }

        .comp-table th {
            font-family: var(--font);
            font-weight: 700;
            letter-spacing: .1em;
            text-transform: uppercase;
            font-size: .8rem;
            color: var(--muted);
        }

        .comp-table th.hl {
            color: var(--neon);
            font-size: .9rem;
        }

        .comp-table td {
            font-family: var(--mono);
            color: var(--muted);
        }

        .comp-table .yes {
            color: var(--cyan);
            font-weight: 600;
        }

        .comp-table tr:last-child td {
            border-bottom: none;
        }

        .comp-table tr:hover td {
            background: rgba(255, 224, 0, .03);
        }

        /* в”Ђв”Ђв”Ђ SKIN GALLERY в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #skins {
            background: var(--bg2);
        }

        #skin-preview {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .skin-cube {
            width: 72px;
            height: 72px;
            border: 3px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            transition: border-color .2s, box-shadow .2s, transform .2s;
            position: relative;
            overflow: hidden;
        }

        .skin-cube:hover {
            border-color: var(--neon);
            box-shadow: 0 0 20px rgba(255, 224, 0, .4);
            transform: rotate(15deg) scale(1.1);
        }

        .skin-cube:nth-child(1) {
            background: #ffe000;
        }

        .skin-cube:nth-child(2) {
            background: #fff;
        }

        .skin-cube:nth-child(3) {
            background: #ff2200;
        }

        .skin-cube:nth-child(4) {
            background: #00ff44;
        }

        .skin-cube:nth-child(5) {
            background: #00ccff;
        }

        .skin-cube:nth-child(6) {
            background: #ff00ff;
        }

        .skin-label {
            font-family: var(--mono);
            font-size: .7rem;
            color: var(--muted);
            text-align: center;
            margin-top: .5rem;
        }

        /* в”Ђв”Ђв”Ђ CTA в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        #cta {
            background: radial-gradient(ellipse at center, #1a1200 0%, var(--bg) 70%);
            text-align: center;
        }

        #cta h2 {
            color: var(--neon);
            margin-bottom: 1rem;
        }

        #cta p {
            color: var(--muted);
            font-family: var(--mono);
            font-size: .85rem;
            margin-bottom: 2rem;
        }

        .cta-btns {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* в”Ђв”Ђв”Ђ FOOTER в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        footer {
            text-align: center;
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            font-family: var(--mono);
            font-size: .72rem;
            color: var(--muted);
        }

        /* в”Ђв”Ђв”Ђ RESPONSIVE в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ */
        @media (max-width: 600px) {
            #hero-title {
                font-size: 2.2rem;
            }

            #preview-cube {
                width: 36px;
                height: 36px;
            }
        }
    </style>

</head>

<body>

    <div id="landing-view">
    <div class="scanlines"></div>

    <!-- NAV -->
    <nav id="navbar">
        <div id="nav-logo">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
                <rect x="2" y="2" width="24" height="24" stroke="#ffe000" stroke-width="1.5" />
                <rect x="7" y="7" width="14" height="14" fill="#ffe000" opacity=".25" />
                <rect x="11" y="11" width="6" height="6" fill="#ffe000" />
            </svg>
            GD&nbsp;<span style="color:#fff">ULTIMATE</span>
        </div>
        <button class="btn-neon btn-sm" onclick="launchGame()">в–¶ РР“Р РђРўР¬</button>
    </nav>

    <!-- HERO -->
    <section id="hero">
        <canvas id="hero-canvas"></canvas>
        <div class="hero-content">
            <div id="hero-badge">BROWSER GAME &nbsp;В·&nbsp; MOBILE READY &nbsp;В·&nbsp; SKIN EDITOR</div>
            <h1 id="hero-title">GD<br /><span>ULTIMATE</span><br />EDITION</h1>
            <p id="hero-sub">РЁРёРїС‹. РџРѕСЂС‚Р°Р»С‹. Gravity. РџСЂС‹РіР°Р№ РёР»Рё СѓРјСЂРё.<br />
                Geometry Dash РїСЂСЏРјРѕ РІ Р±СЂР°СѓР·РµСЂРµ вЂ” СЃ СЂРµРґР°РєС‚РѕСЂРѕРј СЃРєРёРЅРѕРІ Рё С…Р°СЂРґРєРѕСЂРѕРј.</p>
            <div class="hero-btns">
                <button class="btn-neon btn-lg" onclick="launchGame()">в–¶ РР“Р РђРўР¬ РЎР•Р™Р§РђРЎ</button>
                <button class="btn-neon btn-lg btn-cyan"
                    onclick="document.querySelector('#features').scrollIntoView({behavior:'smooth'})">Р§РўРћ Р’РќРЈРўР Р
                    в†“</button>
            </div>

            <!-- LIVE PREVIEW -->
            <div id="preview-box">
                <div id="preview-grid"></div>
                <div id="preview-cube"></div>
                <div class="preview-spike"></div>
                <div class="preview-spike"></div>
                <div class="preview-portal"></div>
                <div id="preview-floor"></div>
            </div>
        </div>
    </section>

    <!-- FEATURES -->
    <section id="features">
        <div class="section-inner">
            <h2 class="section-title">РћРЎРћР‘Р•РќРќРћРЎРўР</h2>
            <div id="features-grid">
                <div class="feature-card">
                    <div class="feat-icon">рџџЁ</div>
                    <h3>Р¤РёР·РёРєР° 60 FPS</h3>
                    <p>РџСЂС‹Р¶РєРё, РіСЂР°РІРёС‚Р°С†РёСЏ Рё СЃС‚РѕР»РєРЅРѕРІРµРЅРёСЏ СЂР°СЃСЃС‡РёС‚С‹РІР°СЋС‚СЃСЏ РєР°Р¶РґС‹Р№ РєР°РґСЂ. Р‘РµР· СЂС‹РІРєРѕРІ, Р±РµР· Р»Р°РіРѕРІ.</p>
                </div>
                <div class="feature-card">
                    <div class="feat-icon">рџЊЂ</div>
                    <h3>РџРѕСЂС‚Р°Р»С‹</h3>
                    <p>РџСЂРѕС…РѕРґРё С‡РµСЂРµР· РїРѕСЂС‚Р°Р»С‹ вЂ” СЂР°Р·РјРµСЂ РєСѓР±Р° РјРµРЅСЏРµС‚СЃСЏ. РњРёРЅРё-СЂРµР¶РёРј РѕС‚РєСЂС‹РІР°РµС‚ РЅРѕРІС‹Рµ РјР°СЂС€СЂСѓС‚С‹.</p>
                </div>
                <div class="feature-card">
                    <div class="feat-icon">рџЋЁ</div>
                    <h3>Р РµРґР°РєС‚РѕСЂ СЃРєРёРЅРѕРІ</h3>
                    <p>16Г—16 РїРёРєСЃРµР»СЊ-Р°СЂС‚ СЂРµРґР°РєС‚РѕСЂ. Р РёСЃСѓР№ РїР°Р»СЊС†РµРј РёР»Рё РјС‹С€РєРѕР№, Р·Р°РіСЂСѓР¶Р°Р№ С„РѕС‚Рѕ, РїСЂРёРјРµРЅСЏР№ Рє РєСѓР±Сѓ.</p>
                </div>
                <div class="feature-card">
                    <div class="feat-icon">рџ“±</div>
                    <h3>Touch Ready</h3>
                    <p>РџРѕР»РЅР°СЏ РїРѕРґРґРµСЂР¶РєР° С‚Р°С‡-СЌРєСЂР°РЅРѕРІ Рё multi-touch. iPhone, iPad, Android вЂ” Р±РµР· РїСЂРѕР±Р»РµРј.</p>
                </div>
                <div class="feature-card">
                    <div class="feat-icon">рџ’Ћ</div>
                    <h3>Р Р°Р·Р±Р»РѕРєРёСЂСѓРµРјС‹Рµ С†РІРµС‚Р°</h3>
                    <p>РќР°Р±РёСЂР°Р№ РѕС‡РєРё вЂ” РѕС‚РєСЂС‹РІР°Р№ РЅРѕРІС‹Рµ СЃРєРёРЅС‹. 6 С†РІРµС‚РѕРІ РєСѓР±Р° РѕС‚ Р¶С‘Р»С‚РѕРіРѕ РґРѕ С„РёРѕР»РµС‚РѕРІРѕРіРѕ.</p>
                </div>
                <div class="feature-card">
                    <div class="feat-icon">вљЎ</div>
                    <h3>РќР°СЂР°СЃС‚Р°СЋС‰Р°СЏ СЃРєРѕСЂРѕСЃС‚СЊ</h3>
                    <p>Р§РµРј Р±РѕР»СЊС€Рµ РѕС‡РєРѕРІ вЂ” С‚РµРј Р±С‹СЃС‚СЂРµРµ Р»РµС‚СЏС‚ С€РёРїС‹. РљР°Р¶РґС‹Р№ Р·Р°Р±РµРі СЃР»РѕР¶РЅРµРµ РїСЂРµРґС‹РґСѓС‰РµРіРѕ.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- COMPARISON -->
    <section id="comparison">
        <div class="section-inner">
            <h2 class="section-title">РЎР РђР’РќР•РќРР•</h2>
            <table class="comp-table">
                <thead>
                    <tr>
                        <th>Р¤СѓРЅРєС†РёСЏ</th>
                        <th>РћР±С‹С‡РЅС‹Р№ РІРµР±-РєР»РѕРЅ</th>
                        <th class="hl">GD ULTIMATE</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>РЈРїСЂР°РІР»РµРЅРёРµ</td>
                        <td>РўРѕР»СЊРєРѕ РїСЂРѕР±РµР»/РјС‹С€СЊ</td>
                        <td class="yes">вњ“ Touch В· Mouse В· Keyboard</td>
                    </tr>
                    <tr>
                        <td>Р¤РёР·РёРєР°</td>
                        <td>Р”С‘СЂРіР°РЅР°СЏ setTimeout</td>
                        <td class="yes">вњ“ requestAnimationFrame 60fps</td>
                    </tr>
                    <tr>
                        <td>РџСЂРµРїСЏС‚СЃС‚РІРёСЏ</td>
                        <td>РўРѕР»СЊРєРѕ С€РёРїС‹</td>
                        <td class="yes">вњ“ РЁРёРїС‹, Р±Р»РѕРєРё, РїРѕСЂС‚Р°Р»С‹, Р±РѕРЅСѓСЃС‹</td>
                    </tr>
                    <tr>
                        <td>РљР°СЃС‚РѕРјРёР·Р°С†РёСЏ</td>
                        <td>РќРµС‚</td>
                        <td class="yes">вњ“ РџРёРєСЃРµР»СЊ-Р°СЂС‚ СЂРµРґР°РєС‚РѕСЂ + С„РѕС‚Рѕ</td>
                    </tr>
                    <tr>
                        <td>РћС‡РєРё Рё СЂРµРєРѕСЂРґС‹</td>
                        <td>РЎРµСЃСЃРёРѕРЅРЅС‹Рµ (СЃР±СЂР°СЃС‹РІР°СЋС‚СЃСЏ)</td>
                        <td class="yes">вњ“ РЎРѕС…СЂР°РЅРµРЅРёРµ РІ localStorage</td>
                    </tr>
                    <tr>
                        <td>РњРѕР±РёР»СЊРЅС‹Рµ</td>
                        <td>РќРµ Р°РґР°РїС‚РёСЂРѕРІР°РЅРѕ</td>
                        <td class="yes">вњ“ РџРѕР»РЅС‹Р№ Р°РґР°РїС‚РёРІ + iOS fix</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!-- CTA -->
    <section id="cta">
        <div class="section-inner">
            <h2 class="section-title">Р“РћРўРћР’ Рљ РџР Р«Р–РљРЈ?</h2>
            <p>РќРµС‚ СѓСЃС‚Р°РЅРѕРІРѕРє. РќРµС‚ СЂРµРіРёСЃС‚СЂР°С†РёР№.<br />РџСЂРѕСЃС‚Рѕ РѕС‚РєСЂРѕР№ Рё РїСЂС‹РіР°Р№.</p>
            <div class="cta-btns">
                <button class="btn-neon btn-lg" onclick="launchGame()">в–¶ Р—РђРџРЈРЎРўРРўР¬ РР“Р РЈ</button>
                <button class="btn-neon btn-lg btn-cyan" onclick="launchEditor()">рџЋЁ Р Р•Р”РђРљРўРћР  РЎРљРРќРћР’</button>
            </div>
        </div>
    </section>

    <footer>
        GD ULTIMATE EDITION &nbsp;В©&nbsp; 2026 &nbsp;|&nbsp; HTML5 Canvas В· Vanilla JS В· Mobile Ready
    </footer>
    </div>
    <div id="game-view" tabindex="0" style="display:none;">
        <div id="world-layer">
            <div id="bg-grid"></div>
            <!-- theme FX -->
            <canvas id="stars"></canvas>
            <div id="lava-glow"></div>
            <div id="glitch-lines"></div>
            <!-- HUD -->
            <div id="hud-score">0</div>
            <div id="hud-coins">рџџЎ 0</div>
            <div id="hud-mode">CUBE</div>
            <div id="hud-theme">NEON</div>
            <div id="shield-flash"></div>
            <!-- ghost + cube -->
            <div id="ghost-cube"></div>
            <div id="cube"></div>
            <div id="floor"></div>
            <!-- achievement popup -->
            <div id="ach-popup">
                <div id="ach-icon">в­ђ</div>
                <div>
                    <div id="ach-title">РђР§РР’РљРђ</div>
                    <div id="ach-desc">...</div>
                </div>
            </div>
        </div>

        <div id="menu-screen" class="screen">
            <h1 style="font-size: 60px; margin-bottom: 20px; color:white; text-align:center; line-height:1;">
                GD<br>ULTIMATE</h1>
            <button class="btn-main" style="font-size: 30px; margin-bottom: 20px;" onclick="startGame()">РР“Р РђРўР¬</button>
            <div style="display: flex; gap: 20px;margin-bottom:14px;">
                <button class="btn-main" style="background: var(--u-purple); color: white;"
                    onclick="openEditor()">РЎРљРРќР«</button>
                <button class="btn-main" style="background: #555; color: white;"
                    onclick="document.getElementById('game-view').style.display='none'; document.getElementById('landing-view').style.display='block'; stopLogic();">Р’Р«Р™РўР</button>
            </div>
            <!-- Theme selector -->
            <div style="display:flex;gap:8px;margin-bottom:10px;align-items:center;">
                <span style="color:#888;font-size:12px;margin-right:4px;">THEME:</span>
                <div class="theme-btn active" style="background:linear-gradient(135deg,#1a0b2e,#4a195c)"
                    onclick="pickTheme(0,this)" title="Neon"></div>
                <div class="theme-btn" style="background:linear-gradient(135deg,#000010,#000830)"
                    onclick="pickTheme(1,this)" title="Space"></div>
                <div class="theme-btn" style="background:linear-gradient(135deg,#1a0000,#3d0800)"
                    onclick="pickTheme(2,this)" title="Lava"></div>
                <div class="theme-btn" style="background:linear-gradient(135deg,#000,#001a00)"
                    onclick="pickTheme(3,this)" title="Glitch"></div>
            </div>

            <div id="high-score-label" style="margin-top:10px;color:var(--u-cyan);font-weight:bold;">Р Р•РљРћР Р”: 0</div>
            <div id="coin-label" style="color:#ffe000;font-size:12px;margin-top:4px;">рџџЎ 0 РјРѕРЅРµС‚ РІСЃРµРіРѕ</div>
        </div>

        <div id="game-over-screen" class="screen hidden">
            <h1 style="color: var(--u-red); font-size: 50px;">GAME OVER</h1>
            <p style="font-size: 24px; color:white;">РЎС‡РµС‚: <span id="final-res">0</span></p>
            <button class="btn-main" onclick="startGame()">Р—РђРќРћР’Рћ</button>
            <button class="btn-main" style="background: #333; color: white; margin-top:10px;" onclick="showMenu()">Р’
                РњР•РќР®</button>
        </div>

        <div id="editor-screen" class="screen hidden">
            <h2 style="color:white;">Р Р•Р”РђРљРўРћР </h2>
            <p style="color:#aaa; font-size:14px; margin-bottom:5px;">(Р РёСЃСѓР№ РїР°Р»СЊС†РµРј РёР»Рё РјС‹С€РєРѕР№)</p>
            <canvas id="skin-tool" width="16" height="16"
                style="width: 200px; height: 200px; image-rendering: pixelated; border: 4px solid var(--u-cyan); background: #000; touch-action: none;"></canvas>
            <div id="color-palette"
                style="display:flex; gap:10px; margin: 20px 0; flex-wrap: wrap; justify-content: center;"></div>

            <div style="margin: 10px 0; display: flex; flex-direction: column; align-items: center; gap: 5px;">
                <input type="file" id="skin-upload" accept="image/*" style="display: none;"
                    onchange="handleImageUpload(this)">
                <button class="btn-main"
                    style="font-size: 14px; padding: 8px 16px; background: var(--accent-blue); color: white;"
                    onclick="document.getElementById('skin-upload').click()">Р—РђР“Р РЈР—РРўР¬ Р¤РћРўРћ</button>
                <label
                    style="color: white; font-size: 12px; display: flex; align-items: center; gap: 5px; cursor: pointer;">
                    <input type="checkbox" id="pixelate-check" checked> РџРёРєСЃРµР»РёР·РёСЂРѕРІР°С‚СЊ (16x16)
                </label>
            </div>
            <button class="btn-main" onclick="applySkin()">РЎРћРҐР РђРќРРўР¬</button>
            <button class="btn-main" style="background: #333; color: white; margin-top: 10px;"
                onclick="showMenu()">РћРўРњР•РќРђ</button>
        </div>
    </div>



    <script>
        /**
         * ==========================================
         * GD ULTIMATE ENGINE
         * РћРЎРќРћР’РќРћР™ РЎРљР РРџРў РР“Р Р« Р Р¤РР—РРљР
         * ==========================================
         * 
         * Р’ СЌС‚РѕРј СЃРєСЂРёРїС‚Рµ СЂРµР°Р»РёР·РѕРІР°РЅР° РІСЃСЏ С„РёР·РёРєР° РєСѓР±Р°,
         * РіРµРЅРµСЂР°С†РёСЏ РїСЂРµРїСЏС‚СЃС‚РІРёР№, СЃС‡РµС‚С‡РёРє РѕС‡РєРѕРІ, С‡Р°СЃС‚РёС†,
         * СЂРµР¶РёРј РїСЂРёР·СЂР°РєР° (Ghost Mode) Рё СЂРµРґР°РєС‚РѕСЂ СЃРєРёРЅРѕРІ.
         * 
         * Р’СЃРµ СЂР°Р±РѕС‚Р°РµС‚ С‡РµСЂРµР· requestAnimationFrame РґР»СЏ 
         * РјР°РєСЃРёРјР°Р»СЊРЅРѕР№ РїР»Р°РІРЅРѕСЃС‚Рё РЅР° 60 Рё 120 FPS СЌРєСЂР°РЅР°С….
         * ==========================================
         */

        // 1. РџРѕР»СѓС‡Р°РµРј СЃСЃС‹Р»РєРё РЅР° РѕСЃРЅРѕРІРЅС‹Рµ СЌР»РµРјРµРЅС‚С‹ DOM
        const cube = document.getElementById('cube');
        const hudScore = document.getElementById('hud-score');
        const hudCoins = document.getElementById('hud-coins');
        const hudMode = document.getElementById('hud-mode');
        const hudTheme = document.getElementById('hud-theme');
        const highScoreLabel = document.getElementById('high-score-label');
        const coinLabel = document.getElementById('coin-label');
        const skinTool = document.getElementById('skin-tool');
        const ctx = skinTool.getContext('2d');
        const worldLayer = document.getElementById('world-layer');
        const ghostEl = document.getElementById('ghost-cube');
        const shieldFlash = document.getElementById('shield-flash');

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           AUDIO вЂ” Web Audio API (no files, synth only)
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        let audioCtx = null;
        function getAC() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            return audioCtx;
        }
        function tone(freq, type, dur, vol = 0.3, slide = 0) {
            try {
                const ac = getAC(), o = ac.createOscillator(), g = ac.createGain();
                o.connect(g); g.connect(ac.destination);
                o.type = type; o.frequency.value = freq;
                if (slide) o.frequency.linearRampToValueAtTime(slide, ac.currentTime + dur);
                g.gain.setValueAtTime(vol, ac.currentTime);
                g.gain.exponentialRampToValueAtTime(0.001, ac.currentTime + dur);
                o.start(); o.stop(ac.currentTime + dur);
            } catch (e) { }
        }
        function noise(dur, vol = 0.3) {
            try {
                const ac = getAC(), buf = ac.createBuffer(1, ac.sampleRate * dur, ac.sampleRate);
                const d = buf.getChannelData(0);
                for (let i = 0; i < d.length; i++) d[i] = (Math.random() * 2 - 1) * (1 - i / d.length);
                const src = ac.createBufferSource(), g = ac.createGain();
                src.buffer = buf; src.connect(g); g.connect(ac.destination);
                g.gain.value = vol; src.start();
            } catch (e) { }
        }
        const snd = {
            jump: () => tone(420, 'square', .10, .18),
            death: () => { noise(.35, .4); tone(120, 'sawtooth', .3, .2, 50); },
            coin: () => { [700, 900, 1100].forEach((f, i) => setTimeout(() => tone(f, 'sine', .12, .25), i * 60)); },
            portal: () => tone(200, 'sawtooth', .3, .3, 900),
            mode: () => tone(330, 'triangle', .2, .25),
        };

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           THEMES
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        const THEMES = [
            { name: 'NEON', grid: 'rgba(255,255,255,.05)' },
            { name: 'SPACE', grid: 'rgba(100,150,255,.04)' },
            { name: 'LAVA', grid: 'rgba(255,100,0,.06)' },
            { name: 'GLITCH', grid: 'rgba(0,255,0,.05)' },
        ];
        let currentTheme = 0;
        function applyTheme(idx) {
            currentTheme = idx;
            const t = THEMES[idx];
            worldLayer.className = idx === 0 ? '' : idx === 1 ? 'theme-space' : idx === 2 ? 'theme-lava' : 'theme-glitch';
            document.getElementById('bg-grid').style.backgroundImage =
                `linear-gradient(${t.grid} 1px,transparent 1px),linear-gradient(90deg,${t.grid} 1px,transparent 1px)`;
            hudTheme.textContent = t.name;
            document.getElementById('lava-glow').style.display = idx === 2 ? 'block' : 'none';
            document.getElementById('glitch-lines').style.display = idx === 3 ? 'block' : 'none';
            const starsEl = document.getElementById('stars');
            starsEl.style.display = idx === 1 ? 'block' : 'none';
            if (idx === 1) drawStars(starsEl);
            // update active btn
            document.querySelectorAll('.theme-btn').forEach((b, i) => b.classList.toggle('active', i === idx));
        }
        function drawStars(c) {
            c.width = window.innerWidth; c.height = window.innerHeight;
            const sc = c.getContext('2d');
            for (let i = 0; i < 120; i++) {
                const r = Math.random() * 1.5 + .3;
                sc.beginPath(); sc.arc(Math.random() * c.width, Math.random() * c.height * 0.7, r, 0, Math.PI * 2);
                sc.fillStyle = `rgba(200,220,255,${Math.random() * .8 + .2})`; sc.fill();
            }
        }
        function pickTheme(idx, btn) { applyTheme(idx); }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           GAME MODE
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        let gameMode = 'cube'; // cube | ufo
        let ufoTimer = 0; // How long till UFO funnel sequence starts

        function setMode(m) {
            gameMode = m;
            cube.className = m === 'cube' ? '' : 'mode-' + m;
            hudMode.textContent = m.toUpperCase();
            snd.mode();
            cube.style.transform = `rotate(0deg)`;
            curRotation = 0;
            if (m === 'ufo') {
                ufoTimer = 600; // time in frames before forced exit
                cube.style.height = miniMode ? '20px' : '36px';

                // Mark all normal obstacles for deletion so we don't clear the array while iterating
                obsList.forEach(o => {
                    if (o.type !== 'portal') {
                        o.el.remove();
                        o.markedForDeletion = true;
                    }
                });

                cY += 150; // Boost player up slightly when entering UFO
                velY = 0;
            } else {
                ufoTimer = 0;
                resetSize();
            }
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           ACHIEVEMENTS
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        const ACHS = [
            { id: 's50', icon: 'в­ђ', title: '50 РѕС‡РєРѕРІ!', desc: 'РџРµСЂРІС‹Рµ РїРѕР»СЃРѕС‚РЅРё', check: s => s.score >= 50 },
            { id: 's100', icon: 'рџ’«', title: 'РЎРѕС‚РєР°!', desc: '100 РѕС‡РєРѕРІ Р·Р° Р·Р°Р±РµРі', check: s => s.score >= 100 },
            { id: 's200', icon: 'рџ”Ґ', title: 'Р›РµРіРµРЅРґР°', desc: '200 РѕС‡РєРѕРІ', check: s => s.score >= 200 },
            { id: 'port', icon: 'рџЊЂ', title: 'РџРѕСЂС‚Р°Р»СЊС‰РёРє', desc: 'РџСЂРѕС€С‘Р» С‡РµСЂРµР· РїРѕСЂС‚Р°Р»', check: s => s.portals > 0 },
            { id: 'coin1', icon: 'рџЄ™', title: 'РљРѕР»Р»РµРєС‚РѕСЂ', desc: 'РџРµСЂРІР°СЏ РјРѕРЅРµС‚Р°', check: s => s.coins > 0 },
            { id: 'coin3', icon: 'рџЏ†', title: 'Р‘РѕРіР°С‡', desc: '3 РјРѕРЅРµС‚С‹ Р·Р° Р·Р°Р±РµРі', check: s => s.coins >= 3 },
        ];
        let unlockedAchs = new Set(JSON.parse(localStorage.getItem('gd_achs') || '[]'));
        let achQueue = [];
        let achTimer = null;

        function checkAchs(s) {
            ACHS.forEach(a => {
                if (!unlockedAchs.has(a.id) && a.check(s)) {
                    unlockedAchs.add(a.id);
                    localStorage.setItem('gd_achs', JSON.stringify([...unlockedAchs]));
                    achQueue.push(a);
                }
            });
            if (achQueue.length && !achTimer) showAch();
        }
        function showAch() {
            if (!achQueue.length) { achTimer = null; return; }
            const a = achQueue.shift();
            document.getElementById('ach-icon').textContent = a.icon;
            document.getElementById('ach-title').textContent = a.title;
            document.getElementById('ach-desc').textContent = a.desc;
            document.getElementById('ach-popup').classList.add('show');
            snd.ach();
            achTimer = setTimeout(() => {
                document.getElementById('ach-popup').classList.remove('show');
                achTimer = setTimeout(showAch, 500);
            }, 2500);
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           GHOST SYSTEM
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        let ghostOn = false;
        let ghostFrames = [];   // recording this run
        let bestGhost = JSON.parse(localStorage.getItem('gd_ghost') || 'null');
        let ghostPlayIdx = 0;

        function toggleGhost() {
            ghostOn = !ghostOn;
            document.getElementById('ghost-btn').textContent = ghostOn ? 'Р’РљР› вњ“' : 'Р’Р«РљР›';
            document.getElementById('ghost-btn').style.background = ghostOn ? '#004' : '#333';
            ghostEl.style.display = ghostOn && bestGhost ? 'block' : 'none';
        }
        function ghostRecord(y) { ghostFrames.push(y); }
        function ghostSave() {
            if (curScore > bestScore && ghostFrames.length) {
                localStorage.setItem('gd_ghost', JSON.stringify(ghostFrames));
                bestGhost = ghostFrames;
            }
            ghostFrames = [];
        }
        function ghostTick() {
            if (!ghostOn || !bestGhost || !runGame) return;
            const y = bestGhost[ghostPlayIdx % bestGhost.length] || 0;
            ghostEl.style.bottom = (y + 80) + 'px';
            ghostEl.style.display = 'block';
            ghostPlayIdx++;
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           RUN STATE (per-game stats for achievements)
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        let runState = {};
        function resetRunState() {
            runState = {
                score: 0, coins: 0, portals: 0
            };
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           PERSISTENT DATA
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        let totalCoins = parseInt(localStorage.getItem('gd_coins') || '0');
        function saveTotalCoins(n) {
            totalCoins += n;
            localStorage.setItem('gd_coins', totalCoins);
            coinLabel.textContent = `рџЄ™ ${totalCoins} РјРѕРЅРµС‚ РІСЃРµРіРѕ`;
        }
        coinLabel.textContent = `рџЄ™ ${totalCoins} РјРѕРЅРµС‚ РІСЃРµРіРѕ`;

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           CORE GAME VARS
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        let runGame = false, miniMode = false, jumpHeld = false;
        let cY = 0, velY = 0, curScore = 0, frames = 0;
        let obsList = [], customSkin = null, rafId = null;
        let bestScore = parseInt(localStorage.getItem('ult_score')) || 0;
        let curRotation = 0, particles = [];
        let godMode = false;
        let sessionCoins = 0;
        let speedMult = 1, speedTimer = 0, spawnTimer = 0;
        const colors = [
            { hex: '#ffff00', req: 0 }, { hex: '#ffffff', req: 0 },
            { hex: '#ff0000', req: 50 }, { hex: '#00ff00', req: 100 },
            { hex: '#00ccff', req: 150 }, { hex: '#ff00ff', req: 200 },
        ];
        let penColor = '#ffff00';

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           UI HELPERS
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        function openGame() {
            document.getElementById('game-view').style.display = 'block';
            document.body.style.overflow = 'hidden';
            showMenu();
        }
        function closeGame() { showMenu(); }

        function showMenu() {
            stopLogic();
            highScoreLabel.innerText = `Р Р•РљРћР Р”: ${bestScore}`;
            coinLabel.textContent = `рџЄ™ ${totalCoins} РјРѕРЅРµС‚ РІСЃРµРіРѕ`;
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById('menu-screen').classList.remove('hidden');
        }

        function stopLogic() {
            runGame = false;
            if (rafId) cancelAnimationFrame(rafId);
            obsList.forEach(o => o.el.remove());
            particles.forEach(p => p.el.remove());
            obsList = []; particles = [];
            cY = 0; velY = 0; curScore = 0; frames = 0; miniMode = false; curRotation = 0;
            hudScore.innerText = '0'; hudCoins.textContent = 'рџЄ™ 0';
            resetSize(); cube.style.transform = 'rotate(0deg)';
            godMode = false; speedMult = 1; spawnTimer = 0;
            cube.style.boxShadow = 'none';
            shieldFlash.classList.remove('on');
            setMode('cube');
            ghostEl.style.display = 'none'; ghostPlayIdx = 0;
            ghostSave();
            resetRunState();
        }

        function startGame() {
            stopLogic();
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            cube.style.background = customSkin ? `url(${customSkin})` : 'var(--u-yellow)';
            cube.style.backgroundSize = 'cover';
            runGame = true; sessionCoins = 0; ghostFrames = []; ghostPlayIdx = 0;
            rafId = requestAnimationFrame(gameLoop);
        }

        function resetSize() {
            const s = miniMode ? 25 : 50;
            cube.style.width = s + 'px'; cube.style.height = s + 'px';
            if (gameMode === 'ufo') cube.style.height = miniMode ? '20px' : '36px';
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           OBSTACLE SPAWNER (expanded types)
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        function spawnObs(type, x, y, cls = '') {
            const el = document.createElement('div');
            el.className = `obstacle ${type} ${cls}`;
            el.style.left = x + 'px'; el.style.bottom = y + 'px';
            worldLayer.appendChild(el);
            const w = cls === 'block-bonus' ? 150 :
                type === 'coin' ? 28 : type === 'speed-arrow' ? 36 : type === 'meteor' ? 45 : 50;
            const h = type === 'portal' ? 120 :
                type === 'coin' ? 28 : type === 'speed-arrow' ? 36 : type === 'meteor' ? 45 : 50;
            obsList.push({ el, type, x, y: y - 80, w, h, active: true, bonus: false });
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           PARTICLES
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        function spawnParticle(x, y) {
            const p = document.createElement('div');
            p.className = 'particle';
            const size = Math.random() * 6 + 4;
            p.style.width = size + 'px'; p.style.height = size + 'px';
            p.style.left = x + 'px'; p.style.bottom = y + 'px';
            worldLayer.appendChild(p);
            particles.push({ el: p, x, opacity: 1.0 });
        }
        function updateParticles(speed) {
            for (let i = particles.length - 1; i >= 0; i--) {
                let p = particles[i]; p.x -= speed; p.opacity -= 0.05;
                if (p.opacity <= 0) { p.el.remove(); particles.splice(i, 1); }
                else { p.el.style.left = p.x + 'px'; p.el.style.opacity = p.opacity; }
            }
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           SKIN EDITOR
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        function initPalette() {
            const pal = document.getElementById('color-palette'); pal.innerHTML = '';
            colors.forEach(c => {
                const s = document.createElement('div'); s.className = 'swatch'; s.style.background = c.hex;
                if (bestScore >= c.req) s.onclick = () => { penColor = c.hex; }; else s.classList.add('locked');
                pal.appendChild(s);
            });
        }
        let isDrawing = false;
        function getPos(e) {
            const r = skinTool.getBoundingClientRect();
            let cx = e.clientX, cy = e.clientY;
            if (e.touches && e.touches.length > 0) { cx = e.touches[0].clientX; cy = e.touches[0].clientY; }
            return { x: Math.floor((cx - r.left) / (r.width / skinTool.width)), y: Math.floor((cy - r.top) / (r.height / skinTool.height)) };
        }
        function drawPixel(e) {
            if (!isDrawing) return; if (e.cancelable) e.preventDefault();
            const pos = getPos(e);
            if (pos.x >= 0 && pos.x < skinTool.width && pos.y >= 0 && pos.y < skinTool.height) { ctx.fillStyle = penColor; ctx.fillRect(pos.x, pos.y, 1, 1); }
        }
        skinTool.addEventListener('mousedown', e => { isDrawing = true; drawPixel(e); });
        window.addEventListener('mouseup', () => isDrawing = false);
        skinTool.addEventListener('mousemove', drawPixel);
        skinTool.addEventListener('touchstart', e => { isDrawing = true; drawPixel(e); }, { passive: false });
        skinTool.addEventListener('touchend', () => isDrawing = false);
        skinTool.addEventListener('touchmove', drawPixel, { passive: false });

        function handleImageUpload(input) {
            if (!input.files || !input.files[0]) return;
            const reader = new FileReader();
            reader.onload = e => {
                const img = new Image();
                img.onload = () => {
                    const pix = document.getElementById('pixelate-check').checked;
                    if (pix) { skinTool.width = 16; skinTool.height = 16; ctx.clearRect(0, 0, 16, 16); ctx.drawImage(img, 0, 0, 16, 16); }
                    else { skinTool.width = img.width; skinTool.height = img.height; ctx.clearRect(0, 0, img.width, img.height); ctx.drawImage(img, 0, 0); }
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        }
        function openEditor() { document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden')); document.getElementById('editor-screen').classList.remove('hidden'); initPalette(); }
        function applySkin() { customSkin = skinTool.toDataURL(); showMenu(); }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           DEATH / WIN
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        function triggerDeath() {
            snd.death();
            if (curScore > bestScore) {
                bestScore = curScore;
                localStorage.setItem('ult_score', bestScore);
            }
            saveTotalCoins(sessionCoins);
            ghostSave();
            runGame = false;
            cancelAnimationFrame(rafId);
            document.getElementById('final-res').textContent = curScore;
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById('game-over-screen').classList.remove('hidden');
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           MAIN GAME LOOP
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        function gameLoop() {
            if (!runGame) return;
            frames++;
            const pSize = miniMode ? 25 : 50;
            const cubeScreenX = window.innerWidth * 0.15;
            const speed = (5 + curScore * 0.05) * speedMult;

            // в”Ђв”Ђ Mode-specific physics в”Ђв”Ђ
            if (gameMode === 'ufo') {
                if (jumpHeld) {
                    velY += 1.0; // strong upward thrust
                    if (frames % 5 === 0) spawnParticle(cube.offsetLeft + 10, cY + 80); // engine exhaust
                } else {
                    velY -= 0.6; // lower gravity falling
                }
                velY = Math.max(-10, Math.min(10, velY)); // clamp UFO speed
            } else {
                velY -= 0.9;
            }

            cY += velY;
            let onGround = false;
            const floorY = 0;

            if (cY <= 0) { cY = 0; velY = 0; onGround = true; }

            // в”Ђв”Ђ Ghost в”Ђв”Ђ
            ghostRecord(cY);
            ghostTick();

            // в”Ђв”Ђ Speed timer в”Ђв”Ђ
            if (speedTimer > 0) { speedTimer--; if (speedTimer === 0) speedMult = 1; }

            // в”Ђв”Ђ Collision with obstacles в”Ђв”Ђ
            const pRect = { x: cubeScreenX, y: cY, w: pSize, h: pSize };
            for (let i = obsList.length - 1; i >= 0; i--) {
                let o = obsList[i];
                if (o.markedForDeletion) {
                    obsList.splice(i, 1);
                    continue;
                }
                o.x -= speed; o.el.style.left = o.x + 'px';
                if (o.x < -200) { o.el.remove(); obsList.splice(i, 1); curScore++; hudScore.innerText = curScore; runState.score = curScore; checkAchs(runState); continue; }

                // AABB
                if (o.x < pRect.x + pRect.w && o.x + o.w > pRect.x && o.y < pRect.y + pRect.h && o.y + o.h > pRect.y) {
                    if (o.type === 'portal' && o.active) {
                        setMode(gameMode === 'cube' ? 'ufo' : 'cube');
                        o.active = false; o.el.style.opacity = 0.3;
                        snd.portal();
                        runState.portals++; checkAchs(runState);
                    } else if (o.type === 'coin') {
                        o.el.remove(); obsList.splice(i, 1);
                        sessionCoins++; runState.coins++;
                        hudCoins.textContent = `рџџЎ ${sessionCoins}`;
                        snd.coin();
                        checkAchs(runState);
                    } else if (o.type === 'speed-arrow') {
                        if (o.active) { speedMult = 1.3; speedTimer = 120; o.active = false; o.el.style.opacity = .3; }
                    } else if (o.type === 'spike' || o.type === 'meteor') {
                        // Very forgiving hitbox for spikes/meteors (matches original GD feel)
                        const pad = 16;
                        if (pRect.x + pRect.w > o.x + pad && pRect.x < o.x + o.w - pad && pRect.y < o.y + o.h - pad) {
                            if (!godMode) { triggerDeath(); return; }
                        }
                    } else if (o.type.includes('block')) {
                        const isSafe = o.type.includes('safe-block');

                        // Calculate centers
                        const pCx = pRect.x + pRect.w / 2;
                        const pCy = pRect.y + pRect.h / 2;
                        const oCx = o.x + o.w / 2;
                        const oCy = o.y + o.h / 2;

                        // Calculate half-widths and half-heights
                        const pHalfW = pRect.w / 2;
                        const pHalfH = pRect.h / 2;
                        const oHalfW = o.w / 2;
                        const oHalfH = o.h / 2;

                        // Calculate distance between centers
                        const dx = pCx - oCx;
                        const dy = pCy - oCy;

                        // Calculate overlaps
                        const overlapX = pHalfW + oHalfW - Math.abs(dx);
                        const overlapY = pHalfH + oHalfH - Math.abs(dy);

                        if (overlapX > 0 && overlapY > 0) {
                            // Collision detected. Determine axis of least penetration
                            if (overlapX >= overlapY) {
                                // Vertical collision
                                if (dy > 0) {
                                    // Hit top of block (landing)
                                    cY = o.y + o.h; velY = 0; onGround = true;
                                    if (o.el.classList.contains('block-bonus') && !o.bonus) { curScore += 2; o.bonus = true; hudScore.innerText = curScore; o.el.style.background = '#00aa00'; }
                                } else {
                                    // Hit bottom of block (bumping head)
                                    if (isSafe && velY > 0) velY = 0;
                                    else if (!isSafe && !godMode) { triggerDeath(); return; }
                                }
                            } else {
                                // Horizontal collision (hitting the side)
                                // Add a tiny 2px forgiveness padding so sliding perfectly over mathematical seams doesn't trigger side hits
                                if (overlapY > 2 && !isSafe && !godMode) {
                                    triggerDeath(); return;
                                }
                            }
                        }
                    }
                }
            }

            // в”Ђв”Ђ Rotation в”Ђв”Ђ
            if (gameMode === 'ufo') {
                curRotation = 0; // saucer doesn't flip
            } else {
                if (onGround) {
                    if (jumpHeld) velY = (miniMode ? 15 : 18);
                    const snap = Math.round(curRotation / 90) * 90;
                    curRotation += ((snap - curRotation) * 0.2);
                    if (frames % 2 === 0) { spawnParticle(cube.offsetLeft, cY + 80); spawnParticle(cube.offsetLeft + (Math.random() * 20 - 10), cY + 80 + (Math.random() * 10 - 5)); }
                } else {
                    curRotation += 6;
                }
            }
            cube.style.transform = `rotate(${curRotation}deg)`;
            updateParticles(speed);
            cube.style.bottom = (cY + 80) + 'px';

            // в”Ђв”Ђ UFO Timer & Funnel в”Ђв”Ђ
            if (gameMode === 'ufo' && ufoTimer > 0) {
                ufoTimer--;
                if (ufoTimer === 0) {
                    // Create a giant "laser beam" portal instead of a funnel
                    const px = window.innerWidth + 100;

                    // A single massive portal covering the whole screen
                    // We can spawn multiple portals stacked vertically so its hitbox covers everything seamlessly
                    for (let i = 0; i < 15; i++) {
                        spawnObs('portal', px, i * 60);
                    }

                    spawnTimer = 200; // Pause normal spawns while the laser passes
                }
            }

            // в”Ђв”Ђ Spawn obstacles в”Ђв”Ђ
            spawnTimer--;
            if (spawnTimer <= 0) {
                const x = window.innerWidth + 100;

                if (gameMode === 'ufo') {
                    if (ufoTimer > 0) { // Only spawn meteors if not in funnel sequence
                        // Spread meteors across the whole vertical play area
                        const heights = [60, 120, 180, 240, 300, 360, 420, 480, 540];
                        const h1 = heights[Math.floor(Math.random() * heights.length)];
                        spawnObs('meteor', x, h1);
                        if (Math.random() > 0.4) {
                            const h2 = heights[Math.floor(Math.random() * heights.length)];
                            if (Math.abs(h1 - h2) > 100) spawnObs('meteor', x + 60, h2);
                        }
                        spawnTimer = 45; // Frequent meteors
                    }
                } else {
                    const r = Math.random();
                    if (r < 0.1) {
                        // Enter UFO portal
                        spawnObs('portal', x, 120);
                        spawnTimer = 100;
                    } else if (r < 0.25) {
                        // Solid wide block platform
                        spawnObs('block', x, 80);
                        spawnObs('block', x + 50, 80);
                        spawnTimer = 90;
                    } else if (r < 0.40) {
                        // Jump over spike onto block
                        spawnObs('spike', x, 80);
                        spawnObs('block', x + 50, 80);
                        spawnTimer = 85;
                    } else if (r < 0.50) {
                        // Speed arrow challenge
                        spawnObs('speed-arrow', x, 97);
                        spawnObs('spike', x + 120, 80);
                        spawnTimer = 90;
                    } else if (r < 0.70) {
                        // Double spike - Widen from 40 to 50 for easier clearing
                        spawnObs('spike', x, 80);
                        spawnObs('spike', x + 50, 80);
                        spawnTimer = 85;
                    } else if (r < 0.82) {
                        // High block (flying platform)
                        spawnObs('block', x, 140);
                        spawnTimer = 65;
                    } else if (r < 0.90) {
                        // Bonus block platform
                        spawnObs('block block-bonus', x, 150);
                        spawnTimer = 75;
                    } else if (r < 0.97) {
                        // Simple block
                        spawnObs('block', x, 80);
                        spawnTimer = 65;
                    } else {
                        // Single spike
                        spawnObs('spike', x, 80);
                        spawnTimer = 65;
                    }
                }
            }

            rafId = requestAnimationFrame(gameLoop);
        }

        /* в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ
           INPUT
        в•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђв•ђ */
        function doJump() {
            if (!runGame) return;
        }
        const startJump = e => {
            if (e.type === 'keydown' && e.code !== 'Space' && e.code !== 'ArrowUp') return;
            if (e.type === 'keydown' && e.repeat) return;
            if (e.cancelable) e.preventDefault();
            jumpHeld = true;
            if (gameMode !== 'ufo') {
                doJump();
                snd.jump();
            } else {
                // simple blip for UFO thruster activation
                if (frames % 10 === 0) snd.jump();
            }
        };
        const endJump = e => {
            jumpHeld = false;
        };
        window.addEventListener('keydown', startJump);
        window.addEventListener('keyup', endJump);
        window.addEventListener('mousedown', startJump);
        window.addEventListener('mouseup', () => { jumpHeld = false; shipThrust = false; });
        window.addEventListener('touchstart', startJump, { passive: false });
        window.addEventListener('touchend', endJump, { passive: false });

        // Init theme
        applyTheme(0);
    </script>

        // в”Ђв”Ђв”Ђ Hero background particle canvas в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ
        const hc = document.getElementById('hero-canvas');
        const hctx = hc.getContext('2d');
        let dots = [];
        function resizeHC() {
            hc.width = hc.offsetWidth;
            hc.height = hc.offsetHeight;
        }
        function initDots() {
            dots = [];
            for (let i = 0; i < 60; i++) {
                dots.push({
                    x: Math.random() * hc.width,
                    y: Math.random() * hc.height,
                    r: Math.random() * 1.5 + 0.5,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.3,
                    a: Math.random() * 0.7 + 0.2,
                });
            }
        }
        function animHero() {
            hctx.clearRect(0, 0, hc.width, hc.height);
            for (const d of dots) {
                d.x += d.vx; d.y += d.vy;
                if (d.x < 0) d.x = hc.width;
                if (d.x > hc.width) d.x = 0;
                if (d.y < 0) d.y = hc.height;
                if (d.y > hc.height) d.y = 0;
                hctx.beginPath();
                hctx.arc(d.x, d.y, d.r, 0, Math.PI * 2);
                hctx.fillStyle = `rgba(255,224,0,${d.a})`;
                hctx.fill();
            }
            // Connect nearby dots
            for (let i = 0; i < dots.length; i++) {
                for (let j = i + 1; j < dots.length; j++) {
                    const dx = dots[i].x - dots[j].x, dy = dots[i].y - dots[j].y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    if (dist < 120) {
                        hctx.beginPath();
                        hctx.moveTo(dots[i].x, dots[i].y);
                        hctx.lineTo(dots[j].x, dots[j].y);
                        hctx.strokeStyle = `rgba(255,224,0,${0.12 * (1 - dist / 120)})`;
                        hctx.lineWidth = 0.6;
                        hctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animHero);
        }
        resizeHC(); initDots(); animHero();
        window.addEventListener('resize', () => { resizeHC(); initDots(); });

        // в”Ђв”Ђв”Ђ Launch game в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ
        function launchGame() {
            document.getElementById('landing-view').style.display = 'none'; document.getElementById('game-view').style.display = 'block'; document.getElementById('game-view').focus(); startGame();
        }
        function launchEditor() {
            // Opens game directly to editor
            sessionStorage.setItem('gd_open_editor', '1');
            document.getElementById('landing-view').style.display = 'none'; document.getElementById('game-view').style.display = 'block'; document.getElementById('game-view').focus(); openEditor();
        }

        // в”Ђв”Ђв”Ђ Navbar scroll style в”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђв”Ђ
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            nav.style.background = window.scrollY > 40
                ? 'rgba(1,3,8,0.97)'
                : 'rgba(1,3,8,0.85)';
        });
    </script>
</body>

</html>
